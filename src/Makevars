UNAME := $(shell uname)

SOURCES = systemfonts.cpp init.cpp
OBJECTS = systemfonts.o init.o

ifeq ($(UNAME), Darwin)
	SOURCES += mac/FontManagerMac.mm
	OBJECTS += mac/FontManagerMac.o
	PKG_CPPFLAGS = -I. `pkg-config --cflags freetype2`
	PKG_LIBS = -framework CoreText -framework Foundation `pkg-config --libs freetype2`
else
	SOURCES += unix/FontManagerLinux.cpp
	OBJECTS += unix/FontManagerLinux.o
	#TODO: use pkgconfig
	PKG_CPPFLAGS = -I. `pkg-config --cflags fontconfig freetype2`
	PKG_LIBS = -L `pkg-config --libs fontconfig freetype2`
endif

all: $(SHLIB)

.PHONY: clean

clean:
	rm -f $(OBJECTS)
